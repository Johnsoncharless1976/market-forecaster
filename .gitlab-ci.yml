# GitLab CI configuration for Zen Market AI
# Runs daily forecast, ingests data, emails results

stages:
  - forecast
  - notify

forecast_job:
  stage: forecast
  image: python:3.11-slim
  script:
    - pip install -r requirements.txt
    # Run the correct forecast script
    - python src/zen_forecast.py > forecast_output.txt
  artifacts:
    paths:
      - forecast_output.txt

send_email_job:
  stage: notify
  image: python:3.11-slim
  dependencies:
    - forecast_job
  script:
    - pip install -r requirements.txt
    - python src/send_email.py
  only:
    - main

