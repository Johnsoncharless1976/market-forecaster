# -------------------------------------------------------
# Stage 1.3 â€“ Daily Ingestion + Monitoring + Alerting
# -------------------------------------------------------
# Runs data_ingestion.py (Stage 1.3) once daily via schedule.
# Uses Python 3.11 image so python command is available.
#
# Commit Message:
# "Stage 1.3: Fix CI/CD job with correct Python image"
# -------------------------------------------------------

stages:
  - ingest

daily_ingestion:
  stage: ingest
  image: python:3.11
  script:
    - echo "ðŸš€ Running Stage 1.3 â€“ Ingestion + Monitoring + Alerting"
    - pip install -r requirements.txt
    - python src/data_ingestion.py
  rules:
    - if: '$CI_PIPELINE_SOURCE == "schedule"'
    - if: '$CI_COMMIT_BRANCH == "main"'
